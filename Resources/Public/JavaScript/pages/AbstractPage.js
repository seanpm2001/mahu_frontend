class AbstractPage{constructor(e,t){this.userHistory=e,this.pageConfig=t}render(){mahu.getMaterialSelector().render(!0);let e=$("#userIconContainer");if(e){let t=[];t.push({id:"clear",label:Localization.getString("clearHistory"),cssClasses:{icon:"far fa-trash-alt smallicon"}}),mahu.getUserName().trim().length>0?(mahu.getProfilePageURL()&&t.push({id:"showProfile",label:Localization.getString("showProfile"),cssClasses:{icon:"fas fa-user-edit smallicon"}}),t.push({id:"logout",label:Localization.getString("logout"),cssClasses:{icon:"fas fa-sign-out-alt smallicon"}})):(t.push({id:"login",label:Localization.getString("login"),cssClasses:{icon:"fas fa-user smallicon"}}),t.push({id:"register",label:Localization.getString("register"),cssClasses:{icon:"fas fa-user-plus smallicon"}})),new ActionsMenu(e,{handler:function(e,t){if("clear"==e&&(mahu.getHistory().clear(),window.location.reload()),"logout"==e){mahu.logout();let e=mahu.getLandingPageURL();e&&e.endsWith("/")?e+="?":e+="&",window.location=e+"logintype=logout"}"showProfile"==e&&(window.location=mahu.getProfilePageURL()),"register"==e&&(window.location=mahu.getRegistrationPageURL()),"login"==e&&(window.location=mahu.getLoginPageURL())},label:Localization.getString("user profile menu"),headerText:""!=mahu.getUserNameExtended()?Localization.getString("loggedInAs")+" "+mahu.getUserNameExtended():void 0,menuOptions:t,additionalCssClasses:{icon:["fa-user-circle","fa-2x","userIcon"],button:"actionsMenuButton"},staticMenu:!0},null).render()}let t=[],n=mahu.getLanguageLinks(),a=mahu.getLanguageID();for(let e=0;e<n.length;++e){let i=n[e];t.push({id:i.langID,label:i.langName,uri:i.uri,cssClasses:{link:i.langID==a?"currentLang":""}})}new ActionsMenu($(".language-switch"),{handler:function(e,t,n){if($.isFunction(mahu.languageSwitchHook)&&!1===mahu.languageSwitchHook(n))return;let a=$("form.searchForm");if(mahu.isResultsPage()&&mahuUtils.usesPostRequests())a.prop("action",n.uri),a[0].submit();else if(mahu.isDetailPage()){let e=mahu.getCurrentPage().gatherMaterialInfo().id,t=n.uri.indexOf("?");window.location=-1!==t?n.uri.substring(0,t)+"/"+e:n.uri+"/"+e}else window.location=n.uri},menuOptions:t,additionalElement:'<div class="currLang">'+Localization.getLanguage()+"</div>",additionalCssClasses:{icon:["fas","fa-globe-europe","fa-2x","userIcon"],button:"actionsMenuButton"},staticMenu:!0},null).render()}addListeners(){let e=$("#debugContent");e&&$("#debugExpander").click(function(t){t.preventDefault(),t.stopPropagation(),e.hasClass("collapsed")?(e.removeClass("collapsed"),e.addClass("expanded")):(e.addClass("collapsed"),e.removeClass("expanded")),e.toggle()}),$(window).scroll(function(){$(this).scrollTop()>200?$("body").addClass("scrolled"):$("body").removeClass("scrolled")}),$("#toTop").click(function(e){let t=$(this).attr("href");$(this).blur(),e.preventDefault();let n=$(t);$("html,body").animate({scrollTop:n.offset().top-50},1050,"easeInOutExpo")}),$(".feedbackHeader").click(function(e){e.preventDefault();let t=$(this).parent();t.hasClass("expanded")?t.removeClass("expanded"):t.addClass("expanded")}).keyup(function(e){if(13!=e.originalEvent.keyCode)return!0;e.preventDefault();let t=$(this).parent();t.hasClass("expanded")?t.removeClass("expanded"):t.addClass("expanded")});let t=$("a.dropdown-toggle");t.length>0&&(t.click(function(e){e.preventDefault(),e.stopPropagation(),$("ul.dropdown-menu:not(:hidden)").hide();let t=$(e.currentTarget).parent().find("ul.dropdown-menu");t.is(":hidden")?t.show():t.hide()}),window.addEventListener("click",function(){$("ul.dropdown-menu:not(:hidden)").hide()}))}initGroupedResultsViewExpanders(e=!1){let t=$(".groupExpander");if($.each(t,function(e,t){let n=$(t),a=n.parent().siblings(".groupEntries");n.parent().click(function(e){n.hasClass("fa-chevron-circle-up")?(n.removeClass("fa-chevron-circle-up"),n.addClass("fa-chevron-circle-down")):(n.addClass("fa-chevron-circle-up"),n.removeClass("fa-chevron-circle-down")),a.toggle()})}),e&&t.click(),$(".groupResultsExpanderContainer").length>0){let e=10;$(".resultList > li .groupEntries").each(function(t,n){let a=$(this),i=a.parent().find(".groupResultsExpander");if(1==i.length){let t=a.find("li");t.length>e&&t.each(function(t,n){t>=e&&$(this).hide()});let n=$(i[0]);n.click(function(){this.classList.contains("resultsshown")?(this.classList.remove("resultsshown"),this.classList.add("resultshidden"),a.find("li:nth-child(n+"+e+")").hide(),n.text("Alle anzeigen...")):(this.classList.remove("resultshidden"),this.classList.add("resultsshown"),a.find("li:hidden").show(),n.text("Weniger anzeigen..."))})}})}}initTabs(){$(".tabs").each(function(e,t){let n=$(t).find(".tab");n.length>1&&n.each(function(e,t){$(t).find("a").on("click keyup",function(e){if("keyup"===e.type&&13!=e.originalEvent.keyCode)return!0;if(e.target.parentElement.classList.contains("currentTab"))return;let t=e.target.getAttribute("data-cid");if(!t)return;let n=$(e.target.parentElement),a=n.parents(".tabs").siblings(".tabContent");a.children().hide(),a.find("."+t).show(),n.addClass("currentTab"),n.siblings(".tab").removeClass("currentTab")})})})}handleSchemaQueried(){}}