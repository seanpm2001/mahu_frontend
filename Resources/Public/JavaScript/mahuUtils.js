"use strict";const mahuUtils=function(){const e={schema:null,materials:[]};return{queryIsEmpty:function(e){if(!e)return!0;let t=e.q,n=e.facet,r=!1,i=!1;if(null!=t){t.default&&(r=t.default.length>0&&"*"!=t.default||t.default.term&&t.default.term.length>0&&"*"!=t.default.term);let e=Object.getOwnPropertyNames(t);for(let n=0;n<e.length;++n){let r=e[n];if("default"===r)continue;let a=t[r],o=Array.isArray(a);i=i||o&&a.length>0||!o&&null!=a}}return!n&&!r&&!i},queryToString:function(e){let t=[],n=Localization.getString("from"),r=Localization.getString("to");if(e.facet){let i=Object.getOwnPropertyNames(e.facet);for(let a=0;a<i.length;++a){let o=i[a],l=e.facet[o],f=Object.getOwnPropertyNames(l),c="";c=(c=Array.isArray(f)?f.join(", "):f.toString()).replace("RANGE",n).replace("TO",r),"category"!==o&&"usecases"!==o||(c=Localization.getString(c)),o=Localization.getString(o),t.push({type:"facet",propName:o,propValue:c})}}const i=function(e,t){if(-1!=e.indexOf("genqft")){if(-1!=e.indexOf("genqftemp")){if(t[2])return Localization.getString(t[2])}else if(t[1])return Localization.getString(t[1])}else if(-1!=e.indexOf("genqfdq")){if(t[2])return Localization.getString(t[2])}else if(t[3])return Localization.getString(t[3]);return""},a=function(e,t){if(-1!=e.indexOf("genqft")){if(-1==e.indexOf("genqftemp"))return;if(t[1])return t[1]}return t[1]},o=function(e,t){if(-1!=e.indexOf("genqft")){if(-1!=e.indexOf("genqftemp"))return"Â° C"}else if(-1!=e.indexOf("genqfdq"));else if(t[2])return t[2];return""};if(e.q){let l=Object.getOwnPropertyNames(e.q);for(let f=0;f<l.length;++f){let c=l[f],u=e.q[c],g="";if(Array.isArray(u)){if(u.length>0){let e=$(".fieldContainer *[id^='c"+mahu.getUid()+"-field-"+c+"']")[0];if(e&&"SELECT"==e.nodeName){for(let t=0;t<e.length;++t)if(e[t].value==u){g=e[t].text;break}}else if(1==u.length&&(g=u[0]),u.length>1){let e=u[0],t=u[1],i=u[2];-1!=c.indexOf("genqf")&&(t=a(c,u),i=o(c,u)),e&&(-1!=c.indexOf("genqft")&&-1==c.indexOf("genqftemp")?g+=e+" ":g+=n+" "+e+" ",i&&(g+=i+" ")),t&&(g+=r+" "+t,i&&(g+=" "+i))}}}else if("string"==typeof u)g=u;else if(u.term)g+=u.term;else{let e=u[0],t=u[1],i=u[2];-1!=c.indexOf("genqf")&&(t=a(c,u),i=o(c,u)),e&&(g+=n+" "+e,i&&(g+=" "+i+" ")),t&&(g+=r+" "+t,i&&(g+=" "+i))}if("default"==(c=Localization.getString(c))&&(c=Localization.getString("keywords")),-1!=c.indexOf("genqf")&&(c=i(c,u)),"true"==g&&(g=Localization.getString("yes")),"false"==g&&(g=Localization.getString("no")),(g=g.trim()).length>0){let e="query";c!=Localization.getString("keywords")&&(e="filter"),t.push({type:e,propName:c,propValue:g})}}}return t},queryToURL:function(e){let t=window.location.origin+mahu.getMaterialSearchPageURL()+"?";const n="tx_find_find";if(e.q){let r=Object.getOwnPropertyNames(e.q);for(let i=0;i<r.length;++i){let a=r[i],o=e.q[a];if(Array.isArray(o)){if(o.length>0){for(let e=0;e<o.length;++e)t+=n+"[q]["+a+"]["+e+"]="+o[e],e!=o.length-1&&(t+="&");t+="&"}}else if("string"==typeof o)t+=n+"[q]["+a+"]="+o+"&";else{let e=Object.getOwnPropertyNames(o);for(let r=0;r<e.length;++r){let i=e[r];t+=n+"[q]["+a+"]["+i+"]="+o[i],t+="&"}}}}if(e.facet){let r=Object.getOwnPropertyNames(e.facet);for(let i=0;i<r.length;++i){let a=r[i],o=e.facet[a];if(Array.isArray(o)){if(o.length>0){for(let e=0;e<o.length;++e)t+=n+"[facet]["+a+"]["+e+"]="+o[e],e!=o.length-1&&(t+="&");t+="&"}}else if("string"==typeof o)t+=n+"[facet]["+a+"]="+o+"&";else{let e=Object.getOwnPropertyNames(o);for(let r=0;r<e.length;++r){let i=e[r],l=o[i];t+=n+"[facet]["+a+"]["+i.replace("&","%26")+"]="+l,t+="&"}}}}return e.sort&&(t+=n+"[sort]="+e.sort+"&"),e.count&&(t+=n+"[count]="+e.count),t},queryMaterialDescription:function(t){if(!t||t.length<1)return!1;let n=null;for(var r=0;r<e.materials.length;++r){let i=e.materials[r];if(i.id===t){n=i;break}}if(n)return $.Deferred().resolve([n]);{let n=$.ajax(mahu.getJSONExportLinkTemplate(t),{accept:"text/json",async:!0,contentType:"text/json",dataType:"json"});return n.done(function(t){e.materials.push(t[0])}),n}},queryMaterialDescriptionRDF:function(e){if(!e||e.length<1)return!1;return $.ajax(mahu.getRDFExportLinkTemplate(e),{accepts:"application/rdf+xml",async:!0,contentType:"application/rdf+xml",dataType:"text"})},querySchema:function(){if(e.schema)return $.Deferred().resolve(e.schema);{let t=$.ajax(mahu.getJSONExportLinkTemplate(""),{accepts:"text/json",async:!0,contentType:"text/json",dataType:"json"});return t.done(function(t){e.schema=t}),t}},saveBlobAsFile:function(e,t,n){var r=new Blob(t,{type:n||"text/csv"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{var i=window.document.createElement("a");i.href=window.URL.createObjectURL(r),i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}},openEMail:function(e){let t=e.to,n=e.subject,r=e.body,i=document.createElement("a"),a=document.getElementsByTagName("body")[0];a.appendChild(i);let o="mailto:";t&&(o+=t),o+="?",n&&(o+="subject="+n),o+="&",r&&(o+="body="+encodeURIComponent(r)),i.href=o,i.click(),a.removeChild(i)},round:function(e,t){let n=Math.pow(10,t);return Math.round(e*n)/n},usesPostRequests:function(){let e=$("form.searchForm")[0];return!!e&&"post"==e.method},addLanguageParameterToURL:function(e){let t=mahu.getLanguageID()||"0";return e.endsWith("&")||(e+="&"),e+"L="+t}}}();