const MaterialClassSelector=function(t,e=!1,a=!0,n=!1){let r=[],i=[];const l=mahu.getTaxonomy(),o=function(t){let e=0;for(let a=0;a<i.length;a+=2){if(i[a]==t){e=i[a+1];break}}return e},c=function(t,e,a){let n=-1;for(let i=0;i<r.length;++i){let l=r[i];if(l.eventName==t&&l.handler==e&&l.scope==a){n=i;break}}return n},s=function(t,e){r.forEach(function(a){if(a.eventName==t)try{a.handler.call(a.scope,e)}catch(t){console.error(t)}})};return{render:function(){$.ajax(mahu.getTermLink("category_unstemmed","json-all"),{accepts:"text/json",async:!0,contentType:"text/json",dataType:"json",crossDomain:!0}).always(function(r){i=r.terms.category_unstemmed;let c=o("Metalle")+o("Nichtmetalle")+o("Verbundwerkstoffe");i=["Werkstoffe",c].concat(i);let d=o("Keramik")+o("Gl채ser")+o("Anorganische Bindemittel"),f=o("Kunststoffe"),u=o("Pflanzliche Stoffe")+o("Tierische Stoffe"),h=o("Nat체rlich")-u;i=["Anorganisch-nat체rlich",h,"Anorganisch-synthetisch",d,"Organisch-nat체rlich",u,"Organisch-synthetisch",f].concat(i),function(){let r=l.getMaterialClass("Werkstoffe");const i=function(t){const e=d3.hierarchy(t);return e.dx=22,e.dy=1100/(e.height+1),d3.tree().nodeSize([e.dx,e.dy])(e)};let c=function(){const t=i(r);let l=1/0,c=-l;t.each(t=>{t.x>c&&(c=t.x),t.x<l&&(l=t.x)});let d="40px",f="120px";"en"==Localization.getLanguage()&&(d="30px",f="130px");const u=d3.create("svg").attr("style","overflow:visible;margin-left:"+d+";margin-right:"+f).attr("viewBox",[0,0,1100,c-l+2*t.dx]).attr("aria-label","Materialtaxonomie als Graphdarstellung"),h=u.append("g").attr("font-family","inherit").attr("font-size",18).attr("transform",`translate(${t.dy/3},${t.dx-l})`),p=(h.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",1).attr("stroke-width",1.5).attr("aria-hidden",!0).selectAll("path").data(t.links()).join("path").attr("d",d3.linkHorizontal().x(t=>t.y).y(t=>t.x)),h.append("g").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("g").data(t.descendants()).join("g").attr("transform",t=>`translate(${t.y},${t.x})`));p.append("circle").attr("aria-hidden",!0).attr("fill",t=>t.children?"#555":"#999").attr("r",2.5);let g=p;if(a&&(g=p.append("a").attr("href",function(t){if(a){if((e||n)&&0==o(t.data.id))return;return"Werkstoffe"===t.data.id?mahu.getQueryLink("*"):mahu.getQueryAndFacetLink("*","category",t.data.facetValue||t.data.id)}}).attr("class",function(t){return(e||n)&&0==o(t.data.id)?"no-change emptyClass":"no-change nonemptyClass"})),g.append("text").attr("dy","0.31em").attr("x",t=>t.children?-6:6).attr("text-anchor",t=>t.children?"end":"start").attr("stroke","white").attr("paint-order","stroke").text(function(t){let a=Localization.getString(t.data.id),n=o(t.data.id);return e&&0!=n&&(a+=" ("+n+")"),a}).attr("class",function(t){if(!a)return(e||n)&&0==o(t.data.id)?"emptyClass":"nonemptyClass"}),!a){let t=function(t){"keyup"===d3.event.type&&13!=d3.event.keyCode||(!e||e&&0!=o(t.data.id))&&s(MaterialClassSelector.events.itemSelected,{facetValue:t.data.facetValue,id:t.data.id})};p.selectAll("text").filter(function(t){return!e&&!n||0!=o(t.data.id)}).on("click",t).on("keyup",t).attr("tabindex",function(t){if(!e&&!n||0!=o(t.data.id))return"0"})}return u.node()}();t.append(c)}()})},addListener:function(t,e,a){if(!$.isFunction(e))return!1;return-1==c(t,e,a)&&(r.push({eventName:t,handler:e,scope:a}),!0)},removeListener:function(t,e,a){let n=c(t,e,a);return-1!=n&&(r.splice(n,1),!0)}}};Object.defineProperties(MaterialClassSelector,{events:{value:Object.defineProperties({},{itemSelected:{value:"itemselected",configurable:!1,enumerable:!0,writable:!1}}),writeable:!1,enumerable:!0,configurable:!1}});