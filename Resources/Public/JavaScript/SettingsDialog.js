const SettingsDialog=function(e,t){let n=null,i=null,o=[],l=t;const c=function(){let e=$("#enableCPP")[0].checked,t=$("#sdPropertySelector")[0].selectedOptions;e&&0==t.length?$("#sdsave").prop("disabled",!0):$("#sdsave").prop("disabled",!1)},d=function(){document.body.removeChild(i),document.body.removeChild(n),window.onresize=null,$("body").removeClass("noscroll"),r(null,CompareView.eventTypes.CLOSED)},s=function(e){let t=$(e);t.css({left:Math.max(($("body").width()-t.outerWidth())/2,0),top:Math.max((window.innerHeight-t.outerHeight())/2,0)})},a=function(e,t,n){let i=-1;for(let l=0;l<o.length;++l){let c=o[l];if(c.eventType==e&&c.handler==t&&c.scope==n){i=l;break}}return i},r=function(e,t){o.forEach(function(n){if(n.eventType&&n.eventType==t||n.eventType==CompareView.eventTypes.ALL||!n.eventType)try{n.handler.call(n.scope,e,t)}catch(e){console.error(e)}})};return{render:function(){let t=this;(i=document.createElement("div")).classList.add("overlay"),(n=document.createElement("div")).id="settingsDialogContainer";let o=document.createElement("i");o.classList.add("fas"),o.classList.add("fa-times");let a=document.createElement("a");a.id="sdcloseRightUpper",a.setAttribute("tabindex","0"),a.classList.add("pull-right"),a.appendChild(o);let r=document.createElement("h3");r.innerText="Einstellungen";let p=document.createElement("div"),u=document.createElement("div");u.classList.add("compareViewHeader"),n.appendChild(a),n.appendChild(r),n.appendChild(u),n.appendChild(p),document.body.appendChild(i),document.body.appendChild(n);let h=e.getSetting("customPreviewProps")||[],m="<h4>Angezeigte Materialeigenschaften in der Ergebnisliste</h4>";h.length>0?m+="<input id='enableCPP' type='checkbox' value='1' checked>":m+="<input id='enableCPP' type='checkbox' value='0'>",m+="<label for='enableCPP' style='display:initial;margin-left:5px'>"+Localization.getString("sd.cpp")+"</label>",m+="<div id='cppSelectionArea'><p>"+Localization.getString("sd.cpp.selectProps")+"</p><select multiple='true' id='sdPropertySelector' class='chosen-container chosen-container-multi inputContainer'>",Object.getOwnPropertyNames(l).forEach(function(e){-1!=h.indexOf(e)?m+="<option selected value='"+e+"'>"+Localization.getString(e)+"</option>":m+="<option value='"+e+"'>"+Localization.getString(e)+"</option>"}),m+="</select></div>",$(u).html(m),h.length>0?$("#cppSelectionArea").show():$("#cppSelectionArea").hide(),$("#sdPropertySelector").chosen({allow_single_deselect:!0,max_selected_options:3}).change(function(){c()});let y=document.getElementById("sdPropertySelector_chosen");y&&(y.style="width:100% !important"),m='<div class="buttonbar"><button id="sdsave" class="btn btn-primary">'+Localization.getString("save")+"</button>",m+='<button id="sdclose" class="btn btn-primary">'+Localization.getString("close")+"</button>",m+="</div>";let g=$(p);g.html(m),$("#sdcloseRightUpper").on("click keyup",function(e){"keyup"===e.type&&13!=e.keyCode||d()}),g.find("#sdsave").click(function(){let e={},n=$("#enableCPP")[0].checked;if(e.cppEnabled=n,n){let t=$("#sdPropertySelector")[0].selectedOptions,n=[];for(let e=0;e<t.length;++e)n.push(t[e].value);e.selectedProperties=n}t.notifyListeners(e,"change"),d()}),g.find("#sdclose").click(function(){d()}),$("#enableCPP").on("click keyup",function(e){"keyup"===e.type&&13!=e.keyCode||(e.target.checked?$("#cppSelectionArea").show():$("#cppSelectionArea").hide(),c())}),$("body").addClass("noscroll"),s(n),window.onresize=function(){s(n)}},addListener:function(e,t,n){if(!$.isFunction(t))return!1;return-1==a(e,t,n)&&(o.push({eventType:e,handler:t,scope:n}),!0)},removeListener:function(e,t,n){let i=a(e,t,n);return-1!=i&&(o.splice(i,1),!0)},notifyListeners:r}};